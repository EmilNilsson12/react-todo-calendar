(this["webpackJsonpreact-todo-calender"]=this["webpackJsonpreact-todo-calender"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(t,e,n){},,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o=n(1),c=n.n(o),a=n(11),r=n.n(a),d=n(4),i=n(2),s=(n(16),n(7)),l=n.n(s),u=n(9),j=n(3),f=n.n(j),b=n(0);var O=function(t){var e=t.day,n=t.placeHolder,o=t.today,c=t.active,a=t.cbFunc,r=t.numOfTodos,d=t.dayValues;return Object(b.jsx)(b.Fragment,{children:n?Object(b.jsx)("div",{className:"placeholder grid-child"}):Object(b.jsxs)("button",{id:e+"|day of this month",className:"\n\t\t\t\t\t\tday-div\n\t\t\t\t\t\tgrid-child\n\t\t\t\t\t\t".concat(c?"active-day":"","\n\t\t\t\t\t\t").concat(r[0]>0?"has-todos":"","\n\t\t\t\t\t\t").concat(r[0]>0&&0===r[1]?"all-todos-done":"","\n\t\t\t\t\t\t").concat(o?"today":"","\n\t\t\t\t\t\t").concat(h(d)?"is-holiday":"","\n\t\t\t\t\t\t").concat(p(d)?"is-flag-day":"","\n\t\t\t\t\t"),onClick:a,children:[r?Object(b.jsx)("div",{className:"notch-container",children:function(){var t;return r[0]>0&&(t=r[1]>0?"".concat(r[1]," todo").concat(r[1]>1?"s":""," due!"):"All todos done!"),t}()}):Object(b.jsx)(b.Fragment,{children:" "}),Object(b.jsx)("div",{className:"date-num",children:e})]})})};function h(t){return!!t&&("Ja"===t["r\xf6d dag"]||"Ja"===t["arbetsfri dag"])}function p(t){return!!t&&""!==t.flaggdag}n(20);var m=function(){return Object(b.jsx)("div",{className:"grid-container week-days",children:function(){for(var t=[],e=0;e<7;e++){var n=f()();n.set("day",e),t.push(Object(b.jsx)("div",{className:"week-day-label",children:n.format("dddd")},n.format("dddd")))}return t}()})},g=(n(21),n(28));n(22);var x=function(t){var e=t.addTodo,n=t.updateTodo,c=t.dayToShow,a=t.updateMode,r=t.updateParams,d=t.setCurrentlyUpdating,s=Object(o.useState)(""),l=Object(i.a)(s,2),u=l[0],j=l[1],O=Object(o.useState)(""),h=Object(i.a)(O,2),p=h[0],m=h[1],x=Object(o.useState)(c),v=Object(i.a)(x,2),y=v[0],S=v[1],T=Object(o.useState)(""),Y=Object(i.a)(T,2),N=Y[0],w=Y[1],I=Object(o.useRef)(null);return Object(o.useEffect)((function(){c&&(S(c),w(c.toISOString().split("T")[0]))}),[c]),Object(o.useEffect)((function(){I.current.focus(),r&&(j(r.title),m(r.description))}),[a,r]),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var o=f()().toISOString().split("T")[1];a?(d(!1),n({title:u,description:p,deadline:y.toISOString().split("T")[0].concat("T",o),id:r.id})):e({title:u,description:p,deadline:y.toISOString().split("T")[0].concat("T",o),id:Object(g.a)()}),j(""),m(""),I.current.focus()},children:[Object(b.jsxs)("label",{children:["Title",Object(b.jsx)("input",{type:"text",value:u,onChange:function(t){var e=t.target;j(e.value)},required:!0,autoFocus:!0,ref:I})]}),Object(b.jsxs)("label",{children:["Additional info",Object(b.jsx)("textarea",{value:p,onChange:function(t){var e=t.target;m(e.value)}})]}),Object(b.jsxs)("label",{children:["Deadline: ",Object(b.jsx)("b",{children:y.endOf("days").fromNow()}),Object(b.jsx)("input",{type:"date",value:N,onChange:function(t){var e=t.target.value,n=e+"T"+f()(y).toISOString().split("T")[1],o=f()(n);S(o),w(e)},required:!0})]}),Object(b.jsxs)("div",{className:"submit-btn-div",children:[Object(b.jsx)("button",{type:"submit",children:a?"Update todo":"Add new Todo"}),a&&Object(b.jsx)("button",{type:"button",onClick:function(){d(!1),j(""),m(""),S(f()()),w(f()().toISOString().split("T")[0])},children:"Cancel"})]})]})},v=n(10);n(23),n(24);var y=function(t){var e=t.todoObj,n=t.toggleCompleteTodo,c=t.deleteTodo,a=t.beginEdit,r=Object(o.useState)(!1),d=Object(i.a)(r,2),s=d[0],l=d[1];return Object(b.jsxs)("div",{className:"\n\t\t\ttodo-view\n\t\t\t".concat(e.completed?"todo-completed":"","\n\t\t"),children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:e.title}),e.description?Object(b.jsx)("p",{children:e.description}):Object(b.jsx)(b.Fragment,{})]}),Object(b.jsx)("div",{className:"todo-btns",children:s?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(){c(e.id),l(!1)},children:"Confirm delete"}),Object(b.jsx)("button",{onClick:function(){l(!1)},children:"Cancel delete"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(){l(!0)},children:"Delete"}),Object(b.jsx)("button",{onClick:function(){a(e)},children:"Update"}),Object(b.jsx)("button",{onClick:function(){n(e)},children:e.completed?"Unmark as complete":"Mark as complete"})]})})]})};var S=function(t){var e,n=t.todos,c=t.crudOperations,a=t.insideDayWithTodos,r=t.dayToShow,s=t.hiddenByDefault,l=Object(o.useState)(!1),u=Object(i.a)(l,2),j=u[0],O=u[1],h=Object(o.useState)({}),p=Object(i.a)(h,2),m=p[0],g=p[1],S=Object(o.useState)(s),Y=Object(i.a)(S,2),N=Y[0],w=Y[1],I=function(t){O(!0),g(t)},C=Object(d.a)(n.sort(T));N&&(C=Object(d.a)(C.filter((function(t){return!t.completed}))));var M,k=new Set,D=Object(v.a)(C);try{for(D.s();!(M=D.n()).done;){var F=M.value;k.add(F.deadline.split("T")[0])}}catch(H){D.e(H)}finally{D.f()}for(var E=Array.from(k),J=[],B=function(){var t=A[U];J.push(C.filter((function(e){return e.deadline.split("T")[0]===t})))},U=0,A=E;U<A.length;U++)B();return j?Object(b.jsx)(x,{addTodo:c.addTodo,updateTodo:c.updateTodo,updateParams:m,updateMode:!0,setCurrentlyUpdating:O,dayToShow:f()(m.deadline)}):Object(b.jsxs)("div",{className:"\n\t\t\t".concat(a?"day-w-todos-grid":"","\n\t\t"),children:[a?Object(b.jsx)(x,{addTodo:c.addTodo,dayToShow:r}):Object(b.jsx)(b.Fragment,{}),Object(b.jsxs)("div",{className:"".concat(a?"list-todos-component-inside-day-with-todos":"list-todos-component"),children:[Object(b.jsxs)("label",{children:["Hide completed",Object(b.jsx)("input",{type:"checkbox",checked:N,onClick:function(){return w(!N)}})]}),Object(b.jsx)("div",{className:"\n\t\t\tall-todos-listed\n\t\t\t".concat(a?"inside-day-with-todos":"","\n\t\t\t"),children:a?null===(e=J[0])||void 0===e?void 0:e.map((function(t){return Object(b.jsx)(y,{todoObj:t,toggleCompleteTodo:c.toggleCompleteTodo,deleteTodo:c.deleteTodo,beginEdit:I},t.id)})):function(){var t,e=[],n=Object(v.a)(J);try{for(n.s();!(t=n.n()).done;){var o=t.value;e.push(Object(b.jsxs)("div",{children:[a?Object(b.jsx)(b.Fragment,{}):Object(b.jsx)("h2",{className:"todos-date-header",children:o[0].deadline.split("T")[0]}),o.map((function(t){return Object(b.jsx)(y,{todoObj:t,toggleCompleteTodo:c.toggleCompleteTodo,deleteTodo:c.deleteTodo,beginEdit:I},t.id)}))]},o[0].deadline.split("T")[0]))}}catch(H){n.e(H)}finally{n.f()}return e}()})]})]})};function T(t,e){var n=f()(t.deadline),o=f()(e.deadline);return n.isBefore(o)?-1:o.isBefore(n)?1:0}var Y=function(t){var e=t.dayToShow,n=t.todos,o=t.crudOperations,c=t.dayValues,a=n.filter((function(t){return e.isSame(t.deadline,"date")}));return Object(b.jsxs)("div",{className:"day-with-todos",children:[Object(b.jsx)("p",{children:e.format("D [of] MMMM, YYYY")}),c.namnsdag.length?Object(b.jsxs)("p",{children:["Idag har ",Object(b.jsx)("u",{children:c.namnsdag.join(" och ")})," namnsdag!"]}):Object(b.jsx)(b.Fragment,{}),""!==c.flaggdag?Object(b.jsxs)("p",{children:["Hissa flaggan f\xf6r idag \xe4r det: ",Object(b.jsx)("u",{children:c.flaggdag})]}):Object(b.jsx)(b.Fragment,{}),Object(b.jsx)("div",{className:"grid-day-with-todos",children:a.length>0?Object(b.jsx)(S,{todos:a,crudOperations:o,insideDayWithTodos:!0,dayToShow:e,hideDoneTodosByDefault:!0}):Object(b.jsxs)("div",{className:"day-w-out-todos",children:[Object(b.jsx)(x,{addTodo:o.addTodo,dayToShow:e}),Object(b.jsxs)("div",{children:[Object(b.jsx)("i",{children:"No todos due this day..."})," ",Object(b.jsx)("p",{children:"Use the form to add a new todo on this day!"})]})]})})]})};var N=function(t){var e=t.todos,n=t.crudOperations,c=Object(o.useState)((function(){return f()()})),a=Object(i.a)(c,2),r=a[0],d=a[1],s=Object(o.useState)(f()()),j=Object(i.a)(s,2),h=j[0],p=(j[1],Object(o.useState)(h.toString().split(" ")[4])),g=Object(i.a)(p,2),x=g[0],v=g[1],y=Object(o.useState)(r.clone().format("YYYY")),S=Object(i.a)(y,2),T=S[0],N=S[1],k=Object(o.useState)(!0),D=Object(i.a)(k,2),F=D[0],E=D[1];Object(o.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(T!==r.clone().format("YYYY")&&N(r.clone().format("YYYY")),localStorage.getItem("year-".concat(T))){t.next=7;break}return localStorage.setItem("year-".concat(T),T),t.next=5,fetch("https://sholiday.faboul.se/dagar/v2.1/".concat(T)).then((function(t){return t.json()})).then(function(){var t=Object(u.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,localStorage.setItem("year-".concat(T,"-holidays"),JSON.stringify(e.dagar));case 2:E(!1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:t.next=8;break;case 7:E(!1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[T,r]),Object(o.useEffect)((function(){v(r.toString().split(" ")[4])}),[r]);var J=function(t){var e,n=t.target;e="|"===n.textContent?parseInt(n.parentNode.parentNode.id.split("|")[0]):""===n.id?parseInt(n.parentNode.id.split("|")[0]):parseInt(n.id.split("|")[0]);var o=r.clone().date(e).toISOString().split("T")[0],c=f()(o+"T"+x);d(c)};return Object(b.jsxs)("div",{className:"calendar",children:[Object(b.jsxs)("div",{className:"month-view",children:[Object(b.jsxs)("div",{className:"month-navigator",children:[Object(b.jsx)("button",{onClick:function(){var t=r.clone().subtract(1,"M").toISOString().split("T")[0],e=f()(t+"T"+x);d(e)},children:"Prev month"}),Object(b.jsx)("h2",{className:"current-month",children:Object(b.jsxs)("i",{children:[r.format("MMMM")," - ",r.format("YYYY")]})}),Object(b.jsx)("button",{onClick:function(){var t=r.clone().add(1,"M").toISOString().split("T")[0],e=f()(t+"T"+x);d(e)},children:"Next month"})]}),Object(b.jsx)(m,{}),Object(b.jsx)("div",{className:"grid-container calender-days",children:function(){for(var t=[],n=r.clone().startOf("month").format("e"),o=1;o<=n;o++)t.push(Object(b.jsx)(O,{placeHolder:!0},"null ".concat(o," of month")));for(var c=1;c<=r.daysInMonth();c++)t.push(Object(b.jsx)(O,{placeHolder:!1,day:c,today:C(h,r,c),active:I(r,c),cbFunc:J,numOfTodos:w(r,e,c),dayValues:M(r,c)},"Day ".concat(c," of month")));return t}()})]}),!1===F?Object(b.jsx)(Y,{dayToShow:r,todos:e,crudOperations:n,dayValues:M(r,0)}):Object(b.jsx)("p",{children:"Loading..."})]})};function w(t,e,n){var o=t.clone().set("date",n).format("YYYY-MM-DD"),c=e.filter((function(t){return t.deadline.split("T")[0]===o})),a=c.filter((function(t){return!t.completed}));return[c.length,a.length]}function I(t,e){return parseInt(t.clone().format("D"),10)===e}function C(t,e,n){var o=parseInt(t.clone().format("D"),10),c=parseInt(t.clone().format("MM"),10),a=parseInt(t.clone().format("YYYY"),10),r=parseInt(e.clone().format("MM"),10),d=parseInt(e.clone().format("YYYY"),10);return o===n&&c===r&&a===d}function M(t,e){var n,o,c,a;return e>0?(n=t.clone().format("YYYY").toString(),o=t.clone().format("MM").toString(),c=t.clone().set("date",e).format("DD").toString()):(n=t.clone().format("YYYY").toString(),o=t.clone().format("MM").toString(),c=t.clone().format("DD").toString()),localStorage.getItem("year-".concat(n,"-holidays"))&&(a=JSON.parse(localStorage.getItem("year-".concat(n,"-holidays"))).find((function(t){return t.datum==="".concat(n,"-").concat(o,"-").concat(c)}))),a}var k=function(){var t=Object(o.useState)(JSON.parse(localStorage.getItem("todos"))||[]),e=Object(i.a)(t,2),n=e[0],c=e[1];Object(o.useEffect)((function(){localStorage.setItem("todos",JSON.stringify(n))}),[n]);var a={addTodo:function(t){D(Object(d.a)(n),c,t)},deleteTodo:function(t){D(Object(d.a)(n).filter((function(e){return e.id!==t})),c)},toggleCompleteTodo:function(t){var e=t.id,o=n.find((function(t){return t.id===e}));o.completed=!o.completed,D(Object(d.a)(n).filter((function(t){return t.id!==e})),c,o)},updateTodo:function(t){D(Object(d.a)(n).filter((function(e){return e.id!==t.id})),c,t)}};return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(S,{todos:n,crudOperations:a,hideDoneTodosByDefault:!1}),Object(b.jsx)(N,{todos:n,crudOperations:a})]})};function D(t,e,n){n&&t.push(n),e(t)}n(25);r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.ce7d2c03.chunk.js.map